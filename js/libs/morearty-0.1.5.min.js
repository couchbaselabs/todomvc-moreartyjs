// Generated by uRequire v0.6.18 - template: 'combined' 
// Combined template optimized with RequireJS/r.js v2.1.14 & almond.
/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

(function(t,n){"use strict";var e=!("function"!=typeof define||!define.amd),r="object"==typeof exports,i=function(){var t,e,r;return function(n){function i(t,n){return m.call(t,n)}function u(t,n){var e,r,i,u,o,a,s,c,f,l,h,d=n&&n.split("/"),p=y.map,v=p&&p["*"]||{};if(t&&"."===t.charAt(0))if(n){for(d=d.slice(0,d.length-1),t=t.split("/"),o=t.length-1,y.nodeIdCompat&&A.test(t[o])&&(t[o]=t[o].replace(A,"")),t=d.concat(t),f=0;f<t.length;f+=1)if(h=t[f],"."===h)t.splice(f,1),f-=1;else if(".."===h){if(1===f&&(".."===t[2]||".."===t[0]))break;f>0&&(t.splice(f-1,2),f-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((d||v)&&p){for(e=t.split("/"),f=e.length;f>0;f-=1){if(r=e.slice(0,f).join("/"),d)for(l=d.length;l>0;l-=1)if(i=p[d.slice(0,l).join("/")],i&&(i=i[r])){u=i,a=f;break}if(u)break;!s&&v&&v[r]&&(s=v[r],c=f)}!u&&s&&(u=s,a=c),u&&(e.splice(0,a,u),t=e.join("/"))}return t}function o(t,e){return function(){return d.apply(n,w.call(arguments,0).concat([t,e]))}}function a(t){return function(n){return u(n,t)}}function s(t){return function(n){g[t]=n}}function c(t){if(i(_,t)){var e=_[t];delete _[t],b[t]=!0,h.apply(n,e)}if(!i(g,t)&&!i(b,t))throw new Error("No "+t);return g[t]}function f(t){var n,e=t?t.indexOf("!"):-1;return e>-1&&(n=t.substring(0,e),t=t.substring(e+1,t.length)),[n,t]}function l(t){return function(){return y&&y.config&&y.config[t]||{}}}var h,d,p,v,g={},_={},y={},b={},m=Object.prototype.hasOwnProperty,w=[].slice,A=/\.js$/;p=function(t,n){var e,r=f(t),i=r[0];return t=r[1],i&&(i=u(i,n),e=c(i)),i?t=e&&e.normalize?e.normalize(t,a(n)):u(t,n):(t=u(t,n),r=f(t),i=r[0],t=r[1],i&&(e=c(i))),{f:i?i+"!"+t:t,n:t,pr:i,p:e}},v={require:function(t){return o(t)},exports:function(t){var n=g[t];return"undefined"!=typeof n?n:g[t]={}},module:function(t){return{id:t,uri:"",exports:g[t],config:l(t)}}},h=function(t,e,r,u){var a,f,l,h,d,y,m=[],w=typeof r;if(u=u||t,"undefined"===w||"function"===w){for(e=!e.length&&r.length?["require","exports","module"]:e,d=0;d<e.length;d+=1)if(h=p(e[d],u),f=h.f,"require"===f)m[d]=v.require(t);else if("exports"===f)m[d]=v.exports(t),y=!0;else if("module"===f)a=m[d]=v.module(t);else if(i(g,f)||i(_,f)||i(b,f))m[d]=c(f);else{if(!h.p)throw new Error(t+" missing "+f);h.p.load(h.n,o(u,!0),s(f),{}),m[d]=g[f]}l=r?r.apply(g[t],m):void 0,t&&(a&&a.exports!==n&&a.exports!==g[t]?g[t]=a.exports:l===n&&y||(g[t]=l))}else t&&(g[t]=r)},t=e=d=function(t,e,r,i,u){if("string"==typeof t)return v[t]?v[t](e):c(p(t,e).f);if(!t.splice){if(y=t,y.deps&&d(y.deps,y.callback),!e)return;e.splice?(t=e,e=r,r=null):t=n}return e=e||function(){},"function"==typeof r&&(r=i,i=u),i?h(n,t,e,r):setTimeout(function(){h(n,t,e,r)},4),d},d.config=function(t){return d(t)},t._defined=g,r=function(t,n,e){n.splice||(e=n,n=[]),i(g,t)||i(_,t)||(_[t]=[t,n,e])},r.amd={jQuery:!0}}(),r("almond",function(){}),r("Util",["require","exports","module"],function(){var t,n,e;t=function(t){return"string"==typeof t&&"?"!==t.charAt(0)},n=function(t,n){for(var e=n(t[0]),r=1;r<t.length;r++)if(n(t[r])!==e)return r;return null},e=function(t,n){return t.slice(n).reverse().concat(t.slice(0,n))};var r=function(t,n){return Object.getOwnPropertyNames(t).forEach(function(e){var r=Object.getOwnPropertyDescriptor(t,e);Object.defineProperty(n,e,r)}),n};return{hashcode:function(t){var n,e,r,i=0;if(0===t.length)return i;for(n=0,r=t.length;r>n;n++)e=t.charCodeAt(n),i=(i<<5)-i+e,i|=0;return i},identity:function(t){return t},not:function(t){return!t},constantly:function(t){return function(){return t}},afterComplete:function(t,n){var e=t();e&&"function"==typeof e.always?e.always(n):n()},undefinedOrNull:function(t){return void 0===t||null===t},startsWith:function(t,n){return 0===t.indexOf(n)},toString:function(t){switch(t){case void 0:return"undefined";case null:return"null";default:return"string"==typeof t?'"'+t+'"':Array.isArray(t)?"["+t.join(", ")+"]":t.toString()}},equals:function(t,n){return t===n||t&&t.equals&&t.equals(n)},getPropertyValues:function(t){return Object.keys(t).map(function(n){return t[n]})},find:function(t,n){for(var e=0;e<t.length;e++){var r=t[e];if(n(r,e,t))return r}return null},findWithIndex:function(t,n){for(var e=0;e<t.length;e++){var r=t[e];if(n(r,e,t))return{index:e,value:r}}return null},resolveArgs:function(r,i){var u={};if(arguments.length>1){var o,a,s,c=Array.isArray(i)?i:Array.prototype.slice.call(arguments,1);if(t(c[0])||!(s=n(c,t)))o=c,a=r;else{var f=Array.isArray(r)?r:Array.prototype.slice.call(r);o=e(c,s),a=e(f,f.length-(c.length-s))}for(var l=0,h=0;l<o.length&&h<a.length;l++){var d=o[l],p=a[h];if(t(d))u[d]=p,h++;else{var v="function"==typeof d?d(p):"?"!==d.charAt(0)?d:d.substring(1);(v||void 0===p)&&(u[v]=p,h++)}}}return u},canRepresentSubpath:function(t){var n=typeof t;return"string"===n||"number"===n||Array.isArray(t)},shallowMerge:function(t,n){for(var e in t)t.hasOwnProperty(e)&&(n[e]=t[e]);return n},papply:function(t,n,e){var r=this,i=function(n){var e=arguments.length>1?Array.prototype.slice.call(arguments,1):null;if(n){var u={};return i._props?(r.shallowMerge(i._props,u),r.shallowMerge(n,u)):u=n,t(u,e)}return t(i._props,e)};if(t._props){var u={};e!==!1?(r.shallowMerge(t._props,u),r.shallowMerge(n,u)):(r.shallowMerge(n,u),r.shallowMerge(t._props,u)),i._props=u}else i._props=n;return i},subclass:function(t,n,e){var i=Object.create(n.prototype);r(t.prototype,i),t.prototype=i,t._super=n.prototype,e&&this.shallowMerge(e,t.prototype),Object.freeze(t.prototype)}}}),r("data/Associative",["require","exports","module"],function(){var t,n,e;t=function(){throw new Error("Abstract method invocation")},n=function(){throw new Error("Path must point to a key")},e=function(t){return t instanceof u};var r,i;r=function(t,n,i,u){if(0===t.length)return n;if(e(i)){var o=t[0],a=i.get(o);return n.unshift({associative:i,key:o}),r(t.slice(1),n,a,u)}return n},i=function(t,n,e){var i=r(n,[],t);if(i.length!==n.length)return t;var u=i[0],o=u.associative,a=u.key,s=e(o,a);return s===o?t:i.slice(1).reduce(function(t,n){return n.associative.assoc(n.key,t)},s)};var u=function(){if(this.constructor===u)throw new Error("Abstract class instatiation")};return u.prototype=Object.freeze({get:function(){t()},update:function(){t()},assoc:function(){t()},dissoc:function(){t()},isAssociative:function(t){return e(t)},getIn:function(t){if(t.length>0){var n=t[0],r=t.slice(1),i=this.get(n);return null!==i?e(i)?i.getIn(r):0===r.length?i:null:null}return this},updateIn:function(t,e){return 0!==t.length?i(this,t,function(t,n){return t.update(n,e)}):void n()},dissocIn:function(t){switch(t.length){case 0:n();break;case 1:return this.dissoc(t[0]);default:return i(this,t,function(t,n){return t.dissoc(n)})}}}),u}),r("data/Map",["require","exports","module","../Util","./Associative"],function(t,n,e,r,i){var u,o,a,s,c,f,l,h,d,p=4,v=Math.pow(2,p),g=function(t,n){return n>>>t&v-1};u=null,o={},a=function(t){return!t},s=function(t){return t===o},c=function(t,n,e){var r=e();return s(r)?u:new m(t,n,r)},f=function(t,n,e,r,i){return a(i)?c(n,e,r):i.update(t,n,e,r)},l=function(t,n,e){return a(e)?n:e.reduce(t,n)},h=function(t,n,e){if(t===n)return!0;var r=a(t),i=a(n);return r||i?r&&i:t.equals(n,e)},d=function(t){return t instanceof V};var _,y,b;_=function(t,n,e){var r=g(t,n._hash),i=g(t,e._hash);return r===i?y(r,_(t+p,n,e)):b(r,n,i,e)},y=function(t,n){var e=[];return e[t]=n,new A(1,e)},b=function(t,n,e,r){var i=[];return i[t]=n,i[e]=r,new A(2,i)};var m,w,A,k=function(t,n,e){var r=t.get(e),i=r&&d(r)&&d(n)?r.merge(n):n;return t.assoc(e,i)};m=function(t,n,e){this._hash=t,this._key=n,this._value=e},m.prototype=Object.freeze({get:function(t,n,e){return e===this._key?this._value:null},update:function(t,n,e,r){var i;if(e===this._key)return i=r(this._value),s(i)?u:i!==this._value?new m(n,e,i):this;i=r();var o=new m(n,e,i);return s(i)?this:this._hash===n?new w(n,[this,o]):_(t,this,o)},reduce:function(t,n){return t(n,this)},map:function(t){var n=t(this._value);return n===this._value?this:new m(this._hash,this._key,t(this._value,this._key))},find:function(t){return t(this._value,this._key)?this._value:null},equals:function(t,n){return t instanceof m&&this._key===t._key?n.isAssociative(this._value)&&n.isAssociative(t._value)?this._value.equals(t._value):this._value===t._value:!1}}),w=function(t,n){this._hash=t,this._children=n},w.prototype=function(){var t=function(t,n,e,i){var u,o,a=r.findWithIndex(t,function(t){return t._key===e});if(a){var c=a.index;u=i(a.value),u!==a.value?(o=t.slice(0),s(u)?o.splice(c,1):o[c]=new m(n,e,u)):o=t}else u=i(),s(u)?o=t:(o=t.slice(0),o.push(new m(n,e,u)));return o};return Object.freeze({get:function(t,n,e){for(var r=0;r<this._children.length;r++){var i=this._children[r];if(i._key===e)return i._value}return null},update:function(n,e,r,i){if(e===this._hash){var u=t(this._children,e,r,i);return u.length>1?new w(this._hash,u):u[0]}var o=i();return s(o)?this:_(n,this,new m(e,r,o))},reduce:function(t,n){return this._children.reduce(t,n)},map:function(t){return new w(this._hash,this._children.map(function(n){return n.map(t)}))},find:function(t){var n=r.find(this._children,function(n){return t(n._value,n._key)});return n?n._value:null},equals:function(t,n){return t instanceof w&&this._hash===t._hash&&this._children.length===t._children.length&&this._children.every(function(e,r){return e.equals(t._children[r],n)})}})}(),A=function(t,n){this._count=t,this._children=n},A.prototype=function(){var t,n,e,i;return t=function(t,n,e,r){var i=g(t,n),u=r._children[i];return a(u)?null:u.get(t+p,n,e)},n=function(t,n,e){var r=t.slice(0);return r[n]=e,r},e=function(t,n){var e=t.slice(0);return delete e[n],e},i=function(t,i,o,s,c){var l=c._children,h=g(t,i),d=c._children[h],v=f(t+p,i,o,s,d);if(a(d)&&!a(v))return new A(c._count+1,n(l,h,v));if(a(d)||!a(v))return v===l[h]?c:new A(c._count,n(l,h,v));var _=Math.max(c._count-1,0);switch(_){case 0:return u;case 1:var y=r.find(l,function(t,n){return t&&n!==h});return y instanceof A?new A(_,e(l,h)):y;default:return new A(_,e(l,h))}},Object.freeze({get:function(n,e,r){return t(n,e,r,this)},update:function(t,n,e,r){return i(t,n,e,r,this)},reduce:function(t,n){return this._children.reduce(function(n,e){return e?e instanceof m?t(n,e):e.reduce(t,n):n},n)},map:function(t){return new A(this._count,this._children.map(function(n){return n.map(t)}))},find:function(t){for(var n=null,e=r.getPropertyValues(this._children),i=0;i<e.length;i++){var u=e[i].find(t);if(u){n=u;break}}return n},equals:function(t,n){return t instanceof A&&this._count===t._count&&this._children.every(function(e,r){var i=t._children[r];return i&&e.equals(i,n)})}})}();var V=function(t){this._root=t};V.prototype=Object.freeze({fill:function(){for(var t=this,n=0;n<arguments.length;n+=2)t=t.assoc(arguments[n],arguments[n+1]);return t},isEmpty:function(){return a(this._root)},get:function(t){if(this.isEmpty())return null;var n=this._root.get(0,r.hashcode(t),t);return r.undefinedOrNull(n)?null:n},contains:function(t){return null!==this.get(t)},update:function(t,n){var e=f(0,r.hashcode(t),t,n,this._root);return e===this._root?this:new V(e)},updateIfExists:function(t,n){return this.contains(t)?this.update(t,n):this},assoc:function(t,n){return this.update(t,r.constantly(n))},dissoc:function(t){return this.update(t,r.constantly(o))},join:function(t){return this.isEmpty()?t:t.reduce(function(t,n,e){return t.assoc(e,n)},this)},reduce:function(t,n){return l(function(n,e){return t(n,e._value,e._key,this)}.bind(this),n,this._root)},map:function(t){return this.isEmpty()?this:new V(this._root.map(function(n,e){return t(n,e,this)}.bind(this)))},foreach:function(t){l(function(n,e){t(e._value,e._key,this)}.bind(this),null,this._root)},filter:function(t){var n=this,e=this.reduce(function(e,r,i){return t(r,i,n)?e.map=e.map.assoc(i,r):e.someSkipped=!0,e},{map:j,someSkipped:!1});return e.someSkipped?e.map:n},find:function(t){return this.isEmpty()?null:this._root.find(function(n,e){return t(n,e,this)}.bind(this))},equals:function(t){return this===t||t instanceof V&&h(this._root,t._root,this)},size:function(){return this.reduce(function(t){return t+1},0)},toString:function(){var t=this.reduce(function(t,n,e){var i=""===t?"":t+", ";return i+='"'+e+'": '+r.toString(n)},"");return"{"+t+"}"},isInstance:function(t){return d(t)},entries:function(){return l(function(t,n){return t.push([n._key,n._value]),t},[],this._root)},keys:function(){return l(function(t,n){return t.push(n._key),t},[],this._root)},values:function(){return l(function(t,n){return t.push(n._value),t},[],this._root)},fillFromObject:function(t,n){var e=n||r.identity;return Object.keys(t).reduce(function(n,r){return n.assoc(r,e(t[r]))},this)},toObject:function(t){var n=t||r.identity;return this.reduce(function(t,e,r){return t[r]=n(e),t},{})},merge:function(t){return this.isEmpty()||this===t?t:t.reduce(k,this)},makeSafeKey:function(t){return t.replace(/\./g,"")}}),r.subclass(V,i);var j=new V(u);return j}),r("data/Vector",["require","exports","module","../Util","./Associative"],function(t,n,e,r,i){var u,o,a;u=function(t,n){var e=t._backingArray.slice(0);return new s(n(e))},o=function(t,n,e){return t===n?!0:t.length!==n.length?!1:t.every(function(t,r){var i=n[r];return e.isAssociative(t)&&e.isAssociative(i)?t.equals(i):t===i})},a=function(t){return t instanceof s};var s=function(t){this._backingArray=t};return s.prototype=Object.freeze({fill:function(){if(0===arguments.length)return this;var t=Array.prototype.slice.call(arguments);return new s(this._backingArray.concat(t))},isEmpty:function(){return 0===this._backingArray.length},get:function(t){var n=this._backingArray[t];return r.undefinedOrNull(n)?null:n},contains:function(t){return t<this._backingArray.length},update:function(t,n){if(this.contains(t)){var e=this.get(t),r=n(e);return r===e?this:u(this,function(n){return n[t]=r,n})}var i=n();return u(this,function(n){return n[t]=i,n})},updateIfExists:function(t,n){return this.contains(t)?this.update(t,n):this},assoc:function(t,n){return this.update(t,r.constantly(n))},dissoc:function(t){return this.contains(t)?u(this,function(n){return n.splice(t,1),n}):this},join:function(t){return this.isEmpty()?t:t.isEmpty()?this:new s(this._backingArray.concat(t._backingArray))},reduce:function(t,n){return this._backingArray.reduce(function(n,e,r){return t(n,e,r,this)}.bind(this),n)},map:function(t){var n=this;return n.isEmpty()?n:u(n,function(e){return e.map(function(e,r){return t(e,r,n)})})},foreach:function(t){var n=this;n.isEmpty()||n._backingArray.forEach(function(e,r){t(e,r,n)})},filter:function(t){var n=this,e=n.isEmpty()?n:u(n,function(e){return e.filter(function(e,r){return t(e,r,n)})});return e.size()===n.size()?n:e},find:function(t){var n=this;return r.find(n._backingArray,function(e,r){return t(e,r,n)})},equals:function(t){return this===t||t instanceof s&&o(this._backingArray,t._backingArray,this)},size:function(){return this._backingArray.length},toString:function(){return"["+this._backingArray.map(function(t){return r.toString(t)}).join(", ")+"]"},isInstance:function(t){return a(t)},insertAt:function(t,n){return u(this,function(e){return t<e.length?e.splice(t,0,n):e[t]=n,e})},prepend:function(t){return u(this,function(n){return n.unshift(t),n})},append:function(t){return u(this,function(n){return n.push(t),n})},fillFromArray:function(t,n){var e=n?t.map(n):t;return this.fill.apply(this,e)},toArray:function(t){return t?this._backingArray.map(t):this._backingArray.slice(0)}}),r.subclass(s,i),new s([])}),r("data/Util",["require","exports","module","./Map","./Vector"],function(t,n,e,r,i){var u,o;return u=function(t){return r.isInstance(t)?t.toObject(u):i.isInstance(t)?t.toArray(u):t},o=function(t){return Array.isArray(t)?i.fillFromArray(t,o):"object"==typeof t?r.fillFromObject(t,o):t},{toJs:function(t){return u(t)},fromJs:function(t){return o(t)},groupBy:function(t,n,e){return t.reduce(function(t,r){var i=Array.isArray(n)?r.getIn(n):r.get(n);return i?t.assoc(e?e(i):i,r):t},r)}}}),r("util/Holder",["require","exports","module"],function(){var t=function(t){this._value=t};return t.prototype=Object.freeze({init:function(n){return new t(n)},getValue:function(){return this._value},setValue:function(t){this._value=t},updateValue:function(t){var n=this._value;return this._value=t(n),n}}),new t(null)}),r("Binding",["require","exports","module","./Util","./data/Map","./data/Vector","./util/Holder"],function(t,n,e,r,i,u,o){var a,s,c;a=function(t,n,e){return new E(n,t._regCountHolder,e,t._listeners,t._listenerNestingLevelHolder)},s=function(t){return t._backingValueHolder.getValue()},c=function(t,n){t._backingValueHolder.setValue(n)};var f,l,h,d,p,v;f=[],l=".",h=function(t){return t?t.split(l):[]},d=function(t){return"string"==typeof t?h(t):r.undefinedOrNull(t)?[]:t},p=function(t){return"string"==typeof t?t:t.join(l)},v=function(t,n){return t.concat(n)};var g,_,y,b,m;g=function(t,n){return t.getIn(n)},_=function(t,n,e){var r=v(t._path,e),i=n(s(t),r);return c(t,i),r},y=function(t,n,e){return _(t,function(t,e){return t.updateIn(e,n)},e)},b=function(t,n){var e=v(t._path,n),r=s(t).dissocIn(e);return c(t,r),e.slice(0,e.length-1)},m=function(t){return i.isInstance(t)?i:u.isInstance(t)?u:null};var w,A,k,V,j,x,O;w=function(t,n){t._listenerNestingLevelHolder.updateValue(function(t){return t+1}),n(t._listenerNestingLevelHolder.getValue()),t._listenerNestingLevelHolder.updateValue(function(t){return t-1})},A=function(t,n){return t.length===n.length?"":p(n.slice(t.length))},k=function(t,n,e,i,u){var o=d(n),a=d(e),s=g(i,o),c=g(u,o);s!==c&&r.getPropertyValues(t).forEach(function(t){t.disabled||t.cb(s,c,e,A(o,a))})},V=function(t,n,e,r,i){if(2>i){var u=t[""];u&&k(u,f,p(n),e,r)}},j=function(t,n){return r.startsWith(n,t)||r.startsWith(t,n)},x=function(t,n,e,i){var u=p(n);Object.keys(t).filter(r.identity).forEach(function(n){j(n,u)&&k(t[n],n,u,e,i)})},O=function(t,n,e){w(t,function(r){var i=s(t);x(t._listeners,n,i,e),V(t._listeners,n,i,e,r)})};var S,q;S=function(t,n){return r.find(r.getPropertyValues(t._listeners),function(t){return!!t[n]})},q=function(t,n,e){var r=S(t,n);r&&(r[n].disabled=e)};var E=function(t,n,e,r,i){this._backingValueHolder=t,this._regCountHolder=n||o.init(0),this._path=e||f,this._listeners=r||{},this._listenerNestingLevelHolder=i||o.init(0)};E.prototype=Object.freeze({init:function(t){return new E(o.init(t))},withBackingValue:function(t){return a(this,o.init(t),this._path)},setBackingValue:function(t,n){var e=s(this);this._backingValueHolder.setValue(t),n!==!1&&O(this,f,e)},val:function(t){return g(s(this),v(this._path,d(t)))},sub:function(t){return a(this,this._backingValueHolder,v(this._path,d(t)))},update:function(){var t=r.resolveArgs(arguments,"?subpath","update"),n=s(this),e=y(this,t.update,d(t.subpath));O(this,e,n)},assoc:function(){var t=r.resolveArgs(arguments,"?subpath","newValue");this.update(t.subpath,r.constantly(t.newValue))},dissoc:function(t){var n=s(this),e=b(this,d(t));O(this,e,n)},clear:function(t){this.update(t,function(t){return m(t)})},addListener:function(t,n){var e="reg"+this._regCountHolder.updateValue(function(t){return t+1}),r=p(v(this._path,d(t))),i=this._listeners[r],u={cb:n,disabled:!1};if(i)i[e]=u;else{var o={};o[e]=u,this._listeners[r]=o}return e},addGlobalListener:function(t){return this.addListener(f,t)},enableListener:function(t){q(this,t,!1)},disableListener:function(t){q(this,t,!0)},withDisabledListener:function(t,n){var e=S(this,t);if(e){var i=e[t];i.disabled=!0,r.afterComplete(n,function(){i.disabled=!1})}else n()},removeListener:function(t){var n=S(this,t);return n?delete n[t]:!1},atomically:function(){return new I(this,[],[])},asArrayPath:function(t){return d(t)},asStringPath:function(t){return p(t)},isInstance:function(t){return t instanceof E}});var I=function(t,n,e){this._binding=t,this._updates=n,this._removals=e,this._committed=!1};return I.prototype=function(){var t,n,e,i,u;return t=function(t,n,e,r){var i=t._updates.slice(0);return i.push({binding:n,update:e,subpath:r}),i},n=function(t,n,e){var r=t._removals.slice(0);return r.push({binding:n,subpath:e}),r},e=function(t){return t._updates.length>0||t._removals.length>0},i=function(t){if(t.length<2)return t;for(var n=t.sort(),e=n[0],i=p(e),u=[e],o=1;o<n.length;o++){var a=n[o],s=p(a);r.startsWith(s,i)||(u.push(a),i=s)}return u},u=function(t){if(t._committed)throw new Error("Transaction already committed");var n=t._updates.map(function(t){return y(t.binding,t.update,t.subpath)}),e=t._removals.map(function(t){return b(t.binding,t.subpath)});return t._committed=!0,n.concat(e)},Object.freeze({update:function(){var n=r.resolveArgs(arguments,function(t){return r.canRepresentSubpath(t)?"subpath":null},"?binding","update"),e=n.binding||this._binding,i=t(this,e,n.update,d(n.subpath));return new I(e,i,this._removals)},assoc:function(){var t=r.resolveArgs(arguments,function(t){return r.canRepresentSubpath(t)?"subpath":null},"?binding","newValue");return this.update(t.subpath,t.binding,r.constantly(t.newValue))},dissoc:function(){var t=r.resolveArgs(arguments,function(t){return r.canRepresentSubpath(t)?"subpath":null},"?binding"),e=t.binding||this._binding,i=n(this,e,d(t.subpath));return new I(e,this._updates,i)},clear:function(){var n=r.resolveArgs(arguments,function(t){return r.canRepresentSubpath(t)?"subpath":null},"?binding"),e=n.binding||this._binding,i=t(this,e,function(t){return m(t)},d(n.subpath));return new I(e,i,this._removals)},commit:function(t){if(e(this)){var n=this._binding,r=s(n),o=u(this),a=s(n);if(t!==!1){if(a!==r){var c=i(o);return w(n,function(t){var e=n._listeners;c.forEach(function(t){x(e,t,a,r)}),V(e,c[0],a,r,t)}.bind(n)),o}return[]}return o}return[]}})}(),new E(o.init(i))}),r("History",["require","exports","module","./data/Map","./data/Vector"],function(t,n,e,r,i){var u,o,a,s,c,f;return u=function(t){t.assoc(r.fill("listenerId",null,"undo",i,"redo",i))},o=function(t){t.atomically().assoc("undo",i).assoc("redo",i).commit()},a=function(t){var n=t.val("listenerId");t.removeListener(n),t.assoc(null)},s=function(t,n){var e=t.addListener([],function(e,u,o,a){n.atomically().update(function(n){return n.update("undo",function(n){var i=t.asArrayPath(a);return n.prepend(r.fillFromObject({newValue:i.length?e.getIn(i):e,oldValue:i.length?u.getIn(i):u,path:a}))}).assoc("redo",i)}).commit(!1)});n.atomically().assoc("listenerId",e).commit(!1)},c=function(t,n,e,r){r.withDisabledListener(e,function(){r.assoc(t,n)})},f=function(t,n,e,r,i){var u=n.val();if(u.isEmpty())return!1;var o=u.get(0);return n.atomically().dissoc(0).update(e,function(t){return t.prepend(o)}).commit(!1),c(o.get("path"),o.get(i),r,t),!0},{init:function(t,n){u(n),s(t,n)},clear:function(t){o(t)},destroy:function(t){a(t)},hasUndo:function(t){var n=t.val("undo");return!!n&&!n.isEmpty()},hasRedo:function(t){var n=t.val("redo");return!!n&&!n.isEmpty()},undo:function(t,n){var e=n.val("listenerId"),r=n.sub("undo"),i=n.sub("redo");return f(t,r,i,e,"oldValue")},redo:function(t,n){var e=n.val("listenerId"),r=n.sub("undo"),i=n.sub("redo");return f(t,i,r,e,"newValue")}}}),r("util/Callback",["require","exports","module","../Util"],function(t,n,e,r){return{assoc:function(t){var n=r.resolveArgs(arguments,"binding",function(t){return r.canRepresentSubpath(t)?"subpath":null},"?f");return function(e){var r=e.target.value;return t.assoc(n.subpath,n.f?n.f(r):r),!1}},dissoc:function(t){var n=r.resolveArgs(arguments,"binding",function(t){return r.canRepresentSubpath(t)?"subpath":null},"?pred");return function(e){var r=e.target.value;return(!n.pred||n.pred(r))&&t.dissoc(n.subpath),!1}},onKey:function(t,n,e,r){return function(i){return i.keyCode===n&&i.shiftKey===e&&i.ctrlKey===r?(t(i),!1):!0}},onEnter:function(t){return this.onKey(t,13,!1,!1)},onEscape:function(t){return this.onKey(t,27,!1,!1)}}}),r("Morearty",["require","exports","module","./Util","./data/Map","./data/Vector","./data/Util","./Binding","./History","./util/Callback"],function(t,e,r,i,u,o,a,s,c,f){var l=function(t,n,e){this.React=t,this._initialState=n,this._previousState=u,this._currentStateBinding=s.init(n),this._configuration=e,this._fullUpdateQueued=!1,this._fullUpdateInProgress=!1};return l.prototype=function(){var t,e,r;return t=function(t,n,e){var r=n.props[t._configuration.statePropertyName];return e?r[e]:r},e=function(t,n){var e=t.val(),r=t.withBackingValue(n).val();return e!==r},r=function(t,n){var r=t._previousState;if(s.isInstance(n))return e(n,r);var u=i.getPropertyValues(n);return!!i.find(u,function(t){return e(t,r)})},Object.freeze({Util:i,Data:{Map:u,Vector:o,Util:a},Binding:s,History:c,Callback:f,state:function(){return this._currentStateBinding},currentState:function(){return this.state().val()},previousState:function(){return this._previousState},resetState:function(t){this._currentStateBinding.setBackingValue(this._initialState,t)},init:function(t){var e=this,r=e._configuration.requestAnimationFrameEnabled,i=n&&n.requestAnimationFrame,u=function(n,r){e._previousState=r,e._fullUpdateQueued?(e._fullUpdateInProgress=!0,t.forceUpdate(function(){e._fullUpdateQueued=!1,e._fullUpdateInProgress=!1})):t.forceUpdate()};e._currentStateBinding.addGlobalListener(function(t,n){r&&i?i(u.bind(e,t,n),null):u(t,n)})},createClass:function(n){var e=this,i=function(){if(e._fullUpdateInProgress)return!0;var n=t(e,this);return!n||r(e,n)};return n.shouldComponentUpdate||(n.shouldComponentUpdate=i),n.shouldComponentUpdateSuper=i,n.getState=function(n){return t(e,this,n)},n.getPreviousState=function(n){return t(e,this,n).withBackingValue(e._previousState).val()},e.React.createClass(n)},queueFullUpdate:function(){this._fullUpdateQueued=!0}})}(),{createContext:function(t,n,e){var r=u.isAssociative(n)?n:a.fromJs(n),i=e||{};return new l(t,r,{statePropertyName:i.statePropertyName||"state",requestAnimationFrameEnabled:i.requestAnimationFrameEnabled||!1})}}}),r("Main",["require","exports","module","./Util","./data/Map","./data/Vector","./data/Util","./Binding","./History","./util/Callback","./Morearty"],function(t,e,r){var i=function(t){return{Util:t("./Util"),Data:{Map:t("./data/Map"),Vector:t("./data/Vector"),Util:t("./data/Util")},Binding:t("./Binding"),History:t("./History"),Callback:t("./util/Callback"),createContext:t("./Morearty").createContext}}.call(this,t,e,r),u=n.Morearty;return n.Morearty=i,i.noConflict=function(){return n.Morearty=u,i},i}),e("Main")};return e?define(i):r?module.exports=i():i()}).call(this,"object"==typeof exports?global:window,"object"==typeof exports?global:window);