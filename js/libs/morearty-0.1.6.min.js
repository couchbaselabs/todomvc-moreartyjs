// Generated by uRequire v0.6.18 - template: 'combined' 
// Combined template optimized with RequireJS/r.js v2.1.14 & almond.
/**
 * @license almond 0.2.9 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */

(function(t,n){"use strict";var r=!("function"!=typeof define||!define.amd),e="object"==typeof exports,i=function(){var t,r,e;return function(n){function i(t,n){return A.call(t,n)}function u(t,n){var r,e,i,u,a,s,o,c,f,l,h,p=n&&n.split("/"),d=v.map,_=d&&d["*"]||{};if(t&&"."===t.charAt(0))if(n){for(p=p.slice(0,p.length-1),t=t.split("/"),a=t.length-1,v.nodeIdCompat&&x.test(t[a])&&(t[a]=t[a].replace(x,"")),t=p.concat(t),f=0;f<t.length;f+=1)if(h=t[f],"."===h)t.splice(f,1),f-=1;else if(".."===h){if(1===f&&(".."===t[2]||".."===t[0]))break;f>0&&(t.splice(f-1,2),f-=2)}t=t.join("/")}else 0===t.indexOf("./")&&(t=t.substring(2));if((p||_)&&d){for(r=t.split("/"),f=r.length;f>0;f-=1){if(e=r.slice(0,f).join("/"),p)for(l=p.length;l>0;l-=1)if(i=d[p.slice(0,l).join("/")],i&&(i=i[e])){u=i,s=f;break}if(u)break;!o&&_&&_[e]&&(o=_[e],c=f)}!u&&o&&(u=o,s=c),u&&(r.splice(0,s,u),t=r.join("/"))}return t}function a(t,r){return function(){return p.apply(n,m.call(arguments,0).concat([t,r]))}}function s(t){return function(n){return u(n,t)}}function o(t){return function(n){y[t]=n}}function c(t){if(i(g,t)){var r=g[t];delete g[t],b[t]=!0,h.apply(n,r)}if(!i(y,t)&&!i(b,t))throw new Error("No "+t);return y[t]}function f(t){var n,r=t?t.indexOf("!"):-1;return r>-1&&(n=t.substring(0,r),t=t.substring(r+1,t.length)),[n,t]}function l(t){return function(){return v&&v.config&&v.config[t]||{}}}var h,p,d,_,y={},g={},v={},b={},A=Object.prototype.hasOwnProperty,m=[].slice,x=/\.js$/;d=function(t,n){var r,e=f(t),i=e[0];return t=e[1],i&&(i=u(i,n),r=c(i)),i?t=r&&r.normalize?r.normalize(t,s(n)):u(t,n):(t=u(t,n),e=f(t),i=e[0],t=e[1],i&&(r=c(i))),{f:i?i+"!"+t:t,n:t,pr:i,p:r}},_={require:function(t){return a(t)},exports:function(t){var n=y[t];return"undefined"!=typeof n?n:y[t]={}},module:function(t){return{id:t,uri:"",exports:y[t],config:l(t)}}},h=function(t,r,e,u){var s,f,l,h,p,v,A=[],m=typeof e;if(u=u||t,"undefined"===m||"function"===m){for(r=!r.length&&e.length?["require","exports","module"]:r,p=0;p<r.length;p+=1)if(h=d(r[p],u),f=h.f,"require"===f)A[p]=_.require(t);else if("exports"===f)A[p]=_.exports(t),v=!0;else if("module"===f)s=A[p]=_.module(t);else if(i(y,f)||i(g,f)||i(b,f))A[p]=c(f);else{if(!h.p)throw new Error(t+" missing "+f);h.p.load(h.n,a(u,!0),o(f),{}),A[p]=y[f]}l=e?e.apply(y[t],A):void 0,t&&(s&&s.exports!==n&&s.exports!==y[t]?y[t]=s.exports:l===n&&v||(y[t]=l))}else t&&(y[t]=e)},t=r=p=function(t,r,e,i,u){if("string"==typeof t)return _[t]?_[t](r):c(d(t,r).f);if(!t.splice){if(v=t,v.deps&&p(v.deps,v.callback),!r)return;r.splice?(t=r,r=e,e=null):t=n}return r=r||function(){},"function"==typeof e&&(e=i,i=u),i?h(n,t,r,e):setTimeout(function(){h(n,t,r,e)},4),p},p.config=function(t){return p(t)},t._defined=y,e=function(t,n,r){n.splice||(r=n,n=[]),i(y,t)||i(g,t)||(g[t]=[t,n,r])},e.amd={jQuery:!0}}(),e("almond",function(){}),e("Util",["require","exports","module"],function(){var t,n,r;t=function(t){return"string"==typeof t&&"?"!==t.charAt(0)},n=function(t,n){for(var r=n(t[0]),e=1;e<t.length;e++)if(n(t[e])!==r)return e;return null},r=function(t,n){return t.slice(n).reverse().concat(t.slice(0,n))};var e=function(t,n){return Object.getOwnPropertyNames(t).forEach(function(r){var e=Object.getOwnPropertyDescriptor(t,r);Object.defineProperty(n,r,e)}),n};return{hashcode:function(t){var n,r,e,i=0;if(0===t.length)return i;for(n=0,e=t.length;e>n;n++)r=t.charCodeAt(n),i=(i<<5)-i+r,i|=0;return i},identity:function(t){return t},not:function(t){return!t},constantly:function(t){return function(){return t}},afterComplete:function(t,n){var r=t();r&&"function"==typeof r.always?r.always(n):n()},undefinedOrNull:function(t){return void 0===t||null===t},startsWith:function(t,n){return 0===t.indexOf(n)},toString:function(t){switch(t){case void 0:return"undefined";case null:return"null";default:return"string"==typeof t?'"'+t+'"':Array.isArray(t)?"["+t.join(", ")+"]":t.toString()}},equals:function(t,n){return t===n||t&&t.equals&&t.equals(n)},getPropertyValues:function(t){return Object.keys(t).map(function(n){return t[n]})},find:function(t,n){for(var r=0;r<t.length;r++){var e=t[r];if(n(e,r,t))return e}return null},findWithIndex:function(t,n){for(var r=0;r<t.length;r++){var e=t[r];if(n(e,r,t))return{index:r,value:e}}return null},resolveArgs:function(e,i){var u={};if(arguments.length>1){var a,s,o,c=Array.isArray(i)?i:Array.prototype.slice.call(arguments,1);if(t(c[0])||!(o=n(c,t)))a=c,s=e;else{var f=Array.isArray(e)?e:Array.prototype.slice.call(e);a=r(c,o),s=r(f,f.length-(c.length-o))}for(var l=0,h=0;l<a.length&&h<s.length;l++){var p=a[l],d=s[h];if(t(p))u[p]=d,h++;else{var _="function"==typeof p?p(d):"?"!==p.charAt(0)?p:p.substring(1);(_||void 0===d)&&(u[_]=d,h++)}}}return u},canRepresentSubpath:function(t){var n=typeof t;return"string"===n||"number"===n||Array.isArray(t)},shallowMerge:function(t,n){for(var r in t)t.hasOwnProperty(r)&&(n[r]=t[r]);return n},papply:function(t,n,r){var e=this,i=function(n){var r=arguments.length>1?Array.prototype.slice.call(arguments,1):null;if(n){var u={};return i._props?(e.shallowMerge(i._props,u),e.shallowMerge(n,u)):u=n,t(u,r)}return t(i._props,r)};if(t._props){var u={};r!==!1?(e.shallowMerge(t._props,u),e.shallowMerge(n,u)):(e.shallowMerge(n,u),e.shallowMerge(t._props,u)),i._props=u}else i._props=n;return i},subclass:function(t,n,r){var i=Object.create(n.prototype);e(t.prototype,i),t.prototype=i,t._super=n.prototype,r&&this.shallowMerge(r,t.prototype),Object.freeze(t.prototype)}}}),e("data/Associative",["require","exports","module"],function(){var t,n,r,e;t=function(){throw new Error("Abstract class instatiation")},n=function(){throw new Error("Abstract method invocation")},r=function(){throw new Error("Path must point to a key")},e=function(t){return t instanceof s};var i,u;i=function(t,n,r,u){if(0===t.length)return n;if(e(r)){var a=t[0],s=r.get(a);return n.unshift({associative:r,key:a}),i(t.slice(1),n,s,u)}return n},u=function(t,n,r){var e=i(n,[],t);if(e.length!==n.length)return t;var u=e[0],a=u.associative,s=u.key,o=r(a,s);return o===a?t:e.slice(1).reduce(function(t,n){return n.associative.assoc(n.key,t)},o)};var a=function(){this.constructor===a&&t()};a.prototype=Object.freeze({hasNext:function(){n()},next:function(){n()}});var s=function(){this.constructor===s&&t()};return s.prototype=Object.freeze({get:function(){n()},update:function(){n()},assoc:function(){n()},dissoc:function(){n()},isAssociative:function(t){return e(t)},getIn:function(t){if(t.length>0){var n=t[0],r=t.slice(1),i=this.get(n);return null!==i?e(i)?i.getIn(r):0===r.length?i:null:null}return this},updateIn:function(t,n){return 0!==t.length?u(this,t,function(t,r){return t.update(r,n)}):void r()},dissocIn:function(t){switch(t.length){case 0:r();break;case 1:return this.dissoc(t[0]);default:return u(this,t,function(t,n){return t.dissoc(n)})}},Iter:a}),s}),e("data/Map",["require","exports","module","../Util","./Associative"],function(t,n,r,e,i){var u,a,s,o,c,f,l,h,p,d=4,_=Math.pow(2,d),y=function(t,n){return n>>>t&_-1};u=null,a={},s=function(t){return!t},o=function(t){return t===a},c=function(t,n,r){var e=r();return o(e)?u:new A(t,n,e)},f=function(t,n,r,e,i){return s(i)?c(n,r,e):i.update(t,n,r,e)},l=function(t,n,r){return s(r)?n:r.reduce(t,n)},h=function(t,n,r){if(t===n)return!0;var e=s(t),i=s(n);return e||i?e&&i:t.equals(n,r)},p=function(t){return t instanceof k};var g,v,b;g=function(t,n,r){var e=y(t,n._hash),i=y(t,r._hash);return e===i?v(e,g(t+d,n,r)):b(e,n,i,r)},v=function(t,n){var r=[];return r[t]=n,new x(1,r)},b=function(t,n,r,e){var i=[];return i[t]=n,i[r]=e,new x(2,i)};var A,m,x,w=function(t,n,r){var e=t.get(r),i=e&&p(e)&&p(n)?e.merge(n):n;return t.assoc(r,i)};A=function(t,n,r){this._hash=t,this._key=n,this._value=r},A.prototype=Object.freeze({get:function(t,n,r){return r===this._key?this._value:null},update:function(t,n,r,e){var i;if(r===this._key)return i=e(this._value),o(i)?u:i!==this._value?new A(n,r,i):this;i=e();var a=new A(n,r,i);return o(i)?this:this._hash===n?new m(n,[this,a]):g(t,this,a)},reduce:function(t,n){return t(n,this)},map:function(t){var n=t(this._value);return n===this._value?this:new A(this._hash,this._key,t(this._value,this._key))},find:function(t){return t(this._value,this._key)?this._value:null},equals:function(t,n){return t instanceof A&&this._key===t._key?n.isAssociative(this._value)&&n.isAssociative(t._value)?this._value.equals(t._value):this._value===t._value:!1}}),m=function(t,n){this._hash=t,this._children=n},m.prototype=function(){var t=function(t,n,r,i){var u,a,s=e.findWithIndex(t,function(t){return t._key===r});if(s){var c=s.index;u=i(s.value),u!==s.value?(a=t.slice(0),o(u)?a.splice(c,1):a[c]=new A(n,r,u)):a=t}else u=i(),o(u)?a=t:(a=t.slice(0),a.push(new A(n,r,u)));return a};return Object.freeze({get:function(t,n,r){for(var e=0;e<this._children.length;e++){var i=this._children[e];if(i._key===r)return i._value}return null},update:function(n,r,e,i){if(r===this._hash){var u=t(this._children,r,e,i);return u.length>1?new m(this._hash,u):u[0]}var a=i();return o(a)?this:g(n,this,new A(r,e,a))},reduce:function(t,n){return this._children.reduce(t,n)},map:function(t){return new m(this._hash,this._children.map(function(n){return n.map(t)}))},find:function(t){var n=e.find(this._children,function(n){return t(n._value,n._key)});return n?n._value:null},equals:function(t,n){return t instanceof m&&this._hash===t._hash&&this._children.length===t._children.length&&this._children.every(function(r,e){return r.equals(t._children[e],n)})}})}(),x=function(t,n){this._count=t,this._children=n},x.prototype=function(){var t,n,r,i;return t=function(t,n,r,e){var i=y(t,n),u=e._children[i];return s(u)?null:u.get(t+d,n,r)},n=function(t,n,r){var e=t.slice(0);return e[n]=r,e},r=function(t,n){var r=t.slice(0);return delete r[n],r},i=function(t,i,a,o,c){var l=c._children,h=y(t,i),p=c._children[h],_=f(t+d,i,a,o,p);if(s(p)&&!s(_))return new x(c._count+1,n(l,h,_));if(s(p)||!s(_))return _===l[h]?c:new x(c._count,n(l,h,_));var g=Math.max(c._count-1,0);switch(g){case 0:return u;case 1:var v=e.find(l,function(t,n){return t&&n!==h});return v instanceof x?new x(g,r(l,h)):v;default:return new x(g,r(l,h))}},Object.freeze({get:function(n,r,e){return t(n,r,e,this)},update:function(t,n,r,e){return i(t,n,r,e,this)},reduce:function(t,n){return this._children.reduce(function(n,r){return r?r instanceof A?t(n,r):r.reduce(t,n):n},n)},map:function(t){return new x(this._count,this._children.map(function(n){return n.map(t)}))},find:function(t){for(var n=null,r=e.getPropertyValues(this._children),i=0;i<r.length;i++){var u=r[i].find(t);if(u){n=u;break}}return n},equals:function(t,n){return t instanceof x&&this._count===t._count&&this._children.every(function(r,e){var i=t._children[e];return i&&r.equals(i,n)})}})}();var k=function(t){this._root=t};k.prototype=Object.freeze({fill:function(){for(var t=this,n=0;n<arguments.length;n+=2)t=t.assoc(arguments[n],arguments[n+1]);return t},isEmpty:function(){return s(this._root)},get:function(t){if(this.isEmpty())return null;var n=this._root.get(0,e.hashcode(t),t);return e.undefinedOrNull(n)?null:n},contains:function(t){return null!==this.get(t)},update:function(t,n){var r=f(0,e.hashcode(t),t,n,this._root);return r===this._root?this:new k(r)},updateIfExists:function(t,n){return this.contains(t)?this.update(t,n):this},assoc:function(t,n){return this.update(t,e.constantly(n))},dissoc:function(t){return this.update(t,e.constantly(a))},join:function(t){return this.isEmpty()?t:t.reduce(function(t,n,r){return t.assoc(r,n)},this)},iter:function(){return new j(this)},reduce:function(t,n){return l(function(n,r){return t(n,r._value,r._key,this)}.bind(this),n,this._root)},map:function(t){return this.isEmpty()?this:new k(this._root.map(function(n,r){return t(n,r,this)}.bind(this)))},foreach:function(t){l(function(n,r){t(r._value,r._key,this)}.bind(this),null,this._root)},filter:function(t){var n=this,r=this.reduce(function(r,e,i){return t(e,i,n)?r.map=r.map.assoc(i,e):r.someSkipped=!0,r},{map:V,someSkipped:!1});return r.someSkipped?r.map:n},find:function(t){return this.isEmpty()?null:this._root.find(function(n,r){return t(n,r,this)}.bind(this))},equals:function(t){return this===t||t instanceof k&&h(this._root,t._root,this)},size:function(){return this.reduce(function(t){return t+1},0)},toString:function(){var t=this.reduce(function(t,n,r){var i=""===t?"":t+", ";return i+='"'+r+'": '+e.toString(n)},"");return"{"+t+"}"},isInstance:function(t){return p(t)},entries:function(){return l(function(t,n){return t.push([n._key,n._value]),t},[],this._root)},keys:function(){return l(function(t,n){return t.push(n._key),t},[],this._root)},values:function(){return l(function(t,n){return t.push(n._value),t},[],this._root)},fillFromObject:function(t,n){var r=n||e.identity;return Object.keys(t).reduce(function(n,e){return n.assoc(e,r(t[e]))},this)},toObject:function(t){var n=t||e.identity;return this.reduce(function(t,r,e){return t[e]=n(r),t},{})},merge:function(t){return this.isEmpty()||this===t?t:t.reduce(w,this)},makeSafeKey:function(t){return t.replace(/\./g,"")}}),e.subclass(k,i);var j=function(t){this._map=t,this._nextKeys=t.keys()};j.prototype=Object.freeze({hasNext:function(){return this._nextKeys.length>0},next:function(){var t=this._nextKeys[0],n=this._map.get(t);return this._nextKeys.splice(0,1),{key:t,value:n}}}),e.subclass(j,i.prototype.Iter);var V=new k(u);return V}),e("data/Vector",["require","exports","module","../Util","./Associative"],function(t,n,r,e,i){var u,a,s,o=32,c=32;u=function(t,n){var r=t.slice(0);return n(r)},a=function(t,n){return new h(u(t._backingArray,n))},s=function(){return new h([].concat.apply([],arguments))};var f,l;f=function(t,n){if(t===n)return!0;if(t.size()!==n.size())return!1;for(var r=t.isAssociative,e=t.iter(),i=n.iter(),u=!0;e.hasNext();){var a=e.next(),s=i.next(),o=r(a)&&r(s)?a.equals(s):a===s;if(!o){u=!1;break}}return u},l=function(t){return t instanceof h};var h=function(t,n,r){if(n&&n.length>o)throw new Error("Invalid prefix array length");if(r&&r.length>c)throw new Error("Invalid suffix array length");this._backingArray=t,this._prefixArray=n||[],this._suffixArray=r||[]};h.prototype=Object.freeze({fill:function(){if(0===arguments.length)return this;var t=Array.prototype.slice.call(arguments);if(this.isEmpty())return new h(t);var n=this._suffixArray.length;return n+arguments.length<=c?new h(this._backingArray,this._prefixArray,u(this._suffixArray,function(n){return n.concat(t)})):s(this._prefixArray,this._backingArray,this._suffixArray,t)},isEmpty:function(){return 0===this.size()},get:function(t){var n;return n=t<this._prefixArray.length?this._prefixArray[t]:t<this._prefixArray.length+this._backingArray.length?this._backingArray[t-this._prefixArray.length]:this._suffixArray[t-(this._prefixArray.length+this._backingArray.length)],e.undefinedOrNull(n)?null:n},contains:function(t){return t<this.size()},update:function(t,n){var r=this;if(r.contains(t)){var e=r.get(t),i=n(e);return i===e?r:t<r._prefixArray.length?new h(r._backingArray,u(r._prefixArray,function(n){return n[t]=i,n}),r._suffixArray):t<r._prefixArray.length+r._backingArray.length?new h(u(r._backingArray,function(n){return n[t-r._prefixArray.length]=i,n}.bind(r)),r._prefixArray,r._suffixArray):new h(r._backingArray,r._prefixArray,u(r._suffixArray,function(n){return n[t-(r._prefixArray.length+r._backingArray.length)]=i,n}))}var a=n(),o=t-(r._prefixArray.length+r._backingArray.length);if(c>o)return new h(this._backingArray,this._prefixArray,u(this._suffixArray,function(t){return t[o]=a,t}));var f=[];return f[t-r.size()]=a,s(this._prefixArray,this._backingArray,this._suffixArray,f)},updateIfExists:function(t,n){return this.contains(t)?this.update(t,n):this},assoc:function(t,n){return this.update(t,e.constantly(n))},dissoc:function(t){return this.contains(t)?a(this,function(n){return n.splice(t,1),n}):this},join:function(t){return this.isEmpty()?t:t.isEmpty()?this:s(this._prefixArray,this._backingArray,this._suffixArray,t._prefixArray,t._backingArray,t._suffixArray)},iter:function(){return new p(this)},reduce:function(t,n){var r=function(n,r,e){return t(n,r,e,this)}.bind(this);return this._prefixArray.reduce(r,this._backingArray.reduce(r,this._suffixArray.reduce(r,n)))},map:function(t){if(this.isEmpty())return this;var n=function(n,r){return t(n,r,this)}.bind(this);return new h(this._backingArray.length>0?this._backingArray.map(n):this._backingArray,this._prefixArray.length>0?this._prefixArray.map(n):this._prefixArray,this._suffixArray.length>0?this._suffixArray.map(n):this._suffixArray)},foreach:function(t){var n=function(n,r){t(n,r,this)}.bind(this);this._prefixArray.forEach(n),this._backingArray.forEach(n),this._suffixArray.forEach(n)},filter:function(t){if(this.isEmpty())return this;var n=function(n,r){return t(n,r,this)}.bind(this),r=this._backingArray.length>0?this._backingArray.filter(n):this._backingArray,e=this._prefixArray.length>0?this._prefixArray.filter(n):this._prefixArray,i=this._suffixArray.length>0?this._suffixArray.filter(n):this._suffixArray;return r.length!==this._backingArray.length||e.length!==this._prefixArray.length||i.length!==this._suffixArray.length?new h(r,e,i):this},find:function(t){var n=function(n,r){return t(n,r,this)}.bind(this);return e.find(this._prefixArray,n)||e.find(this._backingArray,n)||e.find(this._suffixArray,n)},equals:function(t){return this===t||t instanceof h&&f(this,t)},size:function(){return this._prefixArray.length+this._backingArray.length+this._suffixArray.length},toString:function(){var t=function(t){return t.map(function(t){return e.toString(t)}).join(", ")},n=[this._prefixArray,this._backingArray,this._suffixArray].filter(function(t){return t.length>0}).map(t);return"["+n.join(", ")+"]"},isInstance:function(t){return l(t)},insertAt:function(t,n){var r=this;if(t<=r._prefixArray.length){var e=u(r._prefixArray,function(r){return r.splice(t,0,n),r});return e.length<=o?new h(r._backingArray,e,r._suffixArray):s(e,r._backingArray,r._suffixArray)}if(t<r._prefixArray.length+r._backingArray.length)return new h(u(r._backingArray,function(e){return e.splice(t-r._prefixArray.length,0,n),e}),r._suffixArray,r._prefixArray);var i=u(r._suffixArray,function(e){var i=t-(r._prefixArray.length+r._backingArray.length);return i<e.length?e.splice(i,0,n):e[i]=n,e});return i.length<=c?new h(r._backingArray,r._prefixArray,i):s(r._prefixArray,r._backingArray,i)},prepend:function(t){return this.isEmpty()?new h([t]):this._prefixArray.length<o?new h(this._backingArray,u(this._prefixArray,function(n){return n.unshift(t),n}),this._suffixArray):s([t],this._prefixArray,this._backingArray,this._suffixArray)},append:function(t){return this.isEmpty()?new h([t]):this._suffixArray.length<c?new h(this._backingArray,this._prefixArray,u(this._suffixArray,function(n){return n.push(t),n})):s(this._prefixArray,this._backingArray,this._suffixArray,[t])},fillFromArray:function(t,n){var r=n?t.map(n):t;return this.fill.apply(this,r)},toArray:function(t){var n=function(n){return t?n.map(t):n};return[].concat.apply([],[n(this._prefixArray),n(this._backingArray),n(this._suffixArray)])}}),e.subclass(h,i);var p=function(t){this._currentArray=t._prefixArray,this._nextArrays=[t._backingArray,t._suffixArray],this._nextIndex=0};return p.prototype=Object.freeze({hasNext:function(){return this._nextIndex<this._currentArray.length||!!e.find(this._nextArrays,function(t){return t.length>0})},next:function(){return this._nextIndex<this._currentArray.length?this._currentArray[this._nextIndex++]:this._nextArrays.length>0?(this._nextIndex=0,this._currentArray=this._nextArrays[0],this._nextArrays.splice(0,1),this.next()):null}}),e.subclass(p,i.prototype.Iter),new h([])}),e("data/Util",["require","exports","module","./Map","./Vector"],function(t,n,r,e,i){var u,a;return u=function(t){return e.isInstance(t)?t.toObject(u):i.isInstance(t)?t.toArray(u):t},a=function(t){return Array.isArray(t)?i.fillFromArray(t,a):"object"==typeof t?e.fillFromObject(t,a):t},{toJs:function(t){return u(t)},fromJs:function(t){return a(t)},groupBy:function(t,n,r){return t.reduce(function(t,e){var i=Array.isArray(n)?e.getIn(n):e.get(n);return i?t.assoc(r?r(i):i,e):t},e)}}}),e("util/Holder",["require","exports","module"],function(){var t=function(t){this._value=t};return t.prototype=Object.freeze({init:function(n){return new t(n)},getValue:function(){return this._value},setValue:function(t){this._value=t},updateValue:function(t){var n=this._value;return this._value=t(n),n}}),new t(null)}),e("Binding",["require","exports","module","./Util","./data/Map","./data/Vector","./util/Holder"],function(t,n,r,e,i,u,a){var s,o,c;s=function(t,n,r){return new S(n,t._regCountHolder,r,t._listeners,t._listenerNestingLevelHolder)},o=function(t){return t._backingValueHolder.getValue()},c=function(t,n){t._backingValueHolder.setValue(n)};var f,l,h,p,d,_;f=[],l=".",h=function(t){return t?t.split(l):[]},p=function(t){return"string"==typeof t?h(t):e.undefinedOrNull(t)?[]:t},d=function(t){return"string"==typeof t?t:t.join(l)},_=function(t,n){return t.concat(n)};var y,g,v,b,A;y=function(t,n){return t.getIn(n)},g=function(t,n,r){var e=_(t._path,r),i=n(o(t),e);return c(t,i),e},v=function(t,n,r){return g(t,function(t,r){return t.updateIn(r,n)},r)},b=function(t,n){var r=_(t._path,n),e=o(t).dissocIn(r);return c(t,e),r.slice(0,r.length-1)},A=function(t){return i.isInstance(t)?i:u.isInstance(t)?u:null};var m,x,w,k,j,V,I;m=function(t,n){t._listenerNestingLevelHolder.updateValue(function(t){return t+1}),n(t._listenerNestingLevelHolder.getValue()),t._listenerNestingLevelHolder.updateValue(function(t){return t-1})},x=function(t,n){return t.length===n.length?"":d(n.slice(t.length))},w=function(t,n,r,i,u){var a=p(n),s=p(r),o=y(i,a),c=y(u,a);o!==c&&e.getPropertyValues(t).forEach(function(t){t.disabled||t.cb(o,c,r,x(a,s))})},k=function(t,n,r,e,i){if(2>i){var u=t[""];u&&w(u,f,d(n),r,e)}},j=function(t,n){return e.startsWith(n,t)||e.startsWith(t,n)},V=function(t,n,r,i){var u=d(n);Object.keys(t).filter(e.identity).forEach(function(n){j(n,u)&&w(t[n],n,u,r,i)})},I=function(t,n,r){m(t,function(e){var i=o(t);V(t._listeners,n,i,r),k(t._listeners,n,i,r,e)})};var E,O;E=function(t,n){return e.find(e.getPropertyValues(t._listeners),function(t){return!!t[n]})},O=function(t,n,r){var e=E(t,n);e&&(e[n].disabled=r)};var S=function(t,n,r,e,i){this._backingValueHolder=t,this._regCountHolder=n||a.init(0),this._path=r||f,this._listeners=e||{},this._listenerNestingLevelHolder=i||a.init(0)};S.prototype=Object.freeze({init:function(t){return new S(a.init(t))},withBackingValue:function(t){return s(this,a.init(t),this._path)},setBackingValue:function(t,n){var r=o(this);this._backingValueHolder.setValue(t),n!==!1&&I(this,f,r)},val:function(t){return y(o(this),_(this._path,p(t)))},sub:function(t){return s(this,this._backingValueHolder,_(this._path,p(t)))},update:function(){var t=e.resolveArgs(arguments,"?subpath","update"),n=o(this),r=v(this,t.update,p(t.subpath));I(this,r,n)},assoc:function(){var t=e.resolveArgs(arguments,"?subpath","newValue");this.update(t.subpath,e.constantly(t.newValue))},dissoc:function(t){var n=o(this),r=b(this,p(t));I(this,r,n)},clear:function(t){this.update(t,function(t){return A(t)})},addListener:function(t,n){var r="reg"+this._regCountHolder.updateValue(function(t){return t+1}),e=d(_(this._path,p(t))),i=this._listeners[e],u={cb:n,disabled:!1};if(i)i[r]=u;else{var a={};a[r]=u,this._listeners[e]=a}return r},addGlobalListener:function(t){return this.addListener(f,t)},enableListener:function(t){O(this,t,!1)},disableListener:function(t){O(this,t,!0)},withDisabledListener:function(t,n){var r=E(this,t);if(r){var i=r[t];i.disabled=!0,e.afterComplete(n,function(){i.disabled=!1})}else n()},removeListener:function(t){var n=E(this,t);return n?delete n[t]:!1},atomically:function(){return new q(this,[],[])},asArrayPath:function(t){return p(t)},asStringPath:function(t){return d(t)},isInstance:function(t){return t instanceof S}});var q=function(t,n,r){this._binding=t,this._updates=n,this._removals=r,this._committed=!1};return q.prototype=function(){var t,n,r,i,u;return t=function(t,n,r,e){var i=t._updates.slice(0);return i.push({binding:n,update:r,subpath:e}),i},n=function(t,n,r){var e=t._removals.slice(0);return e.push({binding:n,subpath:r}),e},r=function(t){return t._updates.length>0||t._removals.length>0},i=function(t){if(t.length<2)return t;for(var n=t.sort(),r=n[0],i=d(r),u=[r],a=1;a<n.length;a++){var s=n[a],o=d(s);e.startsWith(o,i)||(u.push(s),i=o)}return u},u=function(t){if(t._committed)throw new Error("Transaction already committed");var n=t._updates.map(function(t){return v(t.binding,t.update,t.subpath)}),r=t._removals.map(function(t){return b(t.binding,t.subpath)});return t._committed=!0,n.concat(r)},Object.freeze({update:function(){var n=e.resolveArgs(arguments,function(t){return e.canRepresentSubpath(t)?"subpath":null},"?binding","update"),r=n.binding||this._binding,i=t(this,r,n.update,p(n.subpath));return new q(r,i,this._removals)},assoc:function(){var t=e.resolveArgs(arguments,function(t){return e.canRepresentSubpath(t)?"subpath":null},"?binding","newValue");return this.update(t.subpath,t.binding,e.constantly(t.newValue))},dissoc:function(){var t=e.resolveArgs(arguments,function(t){return e.canRepresentSubpath(t)?"subpath":null},"?binding"),r=t.binding||this._binding,i=n(this,r,p(t.subpath));return new q(r,this._updates,i)},clear:function(){var n=e.resolveArgs(arguments,function(t){return e.canRepresentSubpath(t)?"subpath":null},"?binding"),r=n.binding||this._binding,i=t(this,r,function(t){return A(t)},p(n.subpath));return new q(r,i,this._removals)},commit:function(t){if(r(this)){var n=this._binding,e=o(n),a=u(this),s=o(n);if(t!==!1){if(s!==e){var c=i(a);return m(n,function(t){var r=n._listeners;c.forEach(function(t){V(r,t,s,e)}),k(r,c[0],s,e,t)}.bind(n)),a}return[]}return a}return[]}})}(),new S(a.init(i))}),e("History",["require","exports","module","./data/Map","./data/Vector"],function(t,n,r,e,i){var u,a,s,o,c,f;return u=function(t){t.assoc(e.fill("listenerId",null,"undo",i,"redo",i))},a=function(t){t.atomically().assoc("undo",i).assoc("redo",i).commit()},s=function(t){var n=t.val("listenerId");t.removeListener(n),t.assoc(null)},o=function(t,n){var r=t.addListener([],function(r,u,a,s){n.atomically().update(function(n){return n.update("undo",function(n){var i=t.asArrayPath(s);return n.prepend(e.fillFromObject({newValue:i.length?r.getIn(i):r,oldValue:i.length?u.getIn(i):u,path:s}))}).assoc("redo",i)}).commit(!1)});n.atomically().assoc("listenerId",r).commit(!1)},c=function(t,n,r,e){e.withDisabledListener(r,function(){e.assoc(t,n)})},f=function(t,n,r,e,i){var u=n.val();if(u.isEmpty())return!1;var a=u.get(0);return n.atomically().dissoc(0).update(r,function(t){return t.prepend(a)}).commit(!1),c(a.get("path"),a.get(i),e,t),!0},{init:function(t,n){u(n),o(t,n)},clear:function(t){a(t)},destroy:function(t){s(t)},hasUndo:function(t){var n=t.val("undo");return!!n&&!n.isEmpty()},hasRedo:function(t){var n=t.val("redo");return!!n&&!n.isEmpty()},undo:function(t,n){var r=n.val("listenerId"),e=n.sub("undo"),i=n.sub("redo");return f(t,e,i,r,"oldValue")},redo:function(t,n){var r=n.val("listenerId"),e=n.sub("undo"),i=n.sub("redo");return f(t,i,e,r,"newValue")}}}),e("util/Callback",["require","exports","module","../Util"],function(t,n,r,e){return{assoc:function(t){var n=e.resolveArgs(arguments,"binding",function(t){return e.canRepresentSubpath(t)?"subpath":null},"?f");return function(r){var e=r.target.value;return t.assoc(n.subpath,n.f?n.f(e):e),!1}},dissoc:function(t){var n=e.resolveArgs(arguments,"binding",function(t){return e.canRepresentSubpath(t)?"subpath":null},"?pred");return function(r){var e=r.target.value;return(!n.pred||n.pred(e))&&t.dissoc(n.subpath),!1}},onKey:function(t,n,r,e){return function(i){return i.keyCode===n&&i.shiftKey===r&&i.ctrlKey===e?(t(i),!1):!0}},onEnter:function(t){return this.onKey(t,13,!1,!1)},onEscape:function(t){return this.onKey(t,27,!1,!1)}}}),e("Morearty",["require","exports","module","./Util","./data/Map","./data/Vector","./data/Util","./Binding","./History","./util/Callback"],function(t,r,e,i,u,a,s,o,c,f){var l=function(t,n,r){this.React=t,this._initialState=n,this._previousState=u,this._currentStateBinding=o.init(n),this._configuration=r,this._fullUpdateQueued=!1,this._fullUpdateInProgress=!1};return l.prototype=function(){var t,r,e;return t=function(t,n,r){var e=n.props[t._configuration.statePropertyName];return r?e[r]:e},r=function(t,n){var r=t.val(),e=t.withBackingValue(n).val();return r!==e},e=function(t,n){var e=t._previousState;if(o.isInstance(n))return r(n,e);var u=i.getPropertyValues(n);return!!i.find(u,function(t){return r(t,e)})},Object.freeze({Util:i,Data:{Map:u,Vector:a,Util:s},Binding:o,History:c,Callback:f,state:function(){return this._currentStateBinding},currentState:function(){return this.state().val()},previousState:function(){return this._previousState},resetState:function(t){this._currentStateBinding.setBackingValue(this._initialState,t)},changed:function(){var t=i.resolveArgs(arguments,"binding",function(t){return i.canRepresentSubpath(t)?"subpath":null},"?compare"),n=t.binding.val(t.subpath),r=t.binding.withBackingValue(this._previousState).val(t.subpath);return t.compare?!t.compare(n,r):n!==r},init:function(t){var r=this,e=r._configuration.requestAnimationFrameEnabled,i=n&&n.requestAnimationFrame,u=function(n,e){r._previousState=e,r._fullUpdateQueued?(r._fullUpdateInProgress=!0,t.forceUpdate(function(){r._fullUpdateQueued=!1,r._fullUpdateInProgress=!1})):t.forceUpdate()};r._currentStateBinding.addGlobalListener(function(t,n){e&&i?i(u.bind(r,t,n),null):u(t,n)})},createClass:function(n){var r=this,i=function(){if(r._fullUpdateInProgress)return!0;var n=t(r,this);return!n||e(r,n)};return n.shouldComponentUpdate||(n.shouldComponentUpdate=i),n.shouldComponentUpdateSuper=i,n.getState=function(n){return t(r,this,n)},n.getPreviousState=function(n){return t(r,this,n).withBackingValue(r._previousState).val()},r.React.createClass(n)},queueFullUpdate:function(){this._fullUpdateQueued=!0}})}(),{createContext:function(t,n,r){var e=u.isAssociative(n)?n:s.fromJs(n),i=r||{};return new l(t,e,{statePropertyName:i.statePropertyName||"state",requestAnimationFrameEnabled:i.requestAnimationFrameEnabled||!1})}}}),e("Main",["require","exports","module","./Util","./data/Map","./data/Vector","./data/Util","./Binding","./History","./util/Callback","./Morearty"],function(t,r,e){var i=function(t){return{Util:t("./Util"),Data:{Map:t("./data/Map"),Vector:t("./data/Vector"),Util:t("./data/Util")},Binding:t("./Binding"),History:t("./History"),Callback:t("./util/Callback"),createContext:t("./Morearty").createContext}}.call(this,t,r,e),u=n.Morearty;return n.Morearty=i,i.noConflict=function(){return n.Morearty=u,i},i}),r("Main")};return r?define(i):e?module.exports=i():i()}).call(this,"object"==typeof exports?global:window,"object"==typeof exports?global:window);